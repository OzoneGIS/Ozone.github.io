<!doctype html>
<html>
	<head>
		<!--<link href="./src/styles/index.css" rel="stylesheet" type="text/css">
		<script src="./src/scripts/index.js"></script>-->
		<meta charset='utf-8' />
    		<title>Display map navigation controls</title>
    		<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
		<script src='https://api.mapbox.com/mapbox-gl-js/v0.44.0/mapbox-gl.js'></script>
		<link href='https://api.mapbox.com/mapbox-gl-js/v0.44.0/mapbox-gl.css' rel='stylesheet' />
		<style>
        		body { margin:0; padding:0; }
        		#map { position:absolute; top:0; bottom:0; width:100%; }
    		</style>
	</head>
	<body>
		<style>
			.mapboxgl-popup {
				max-width: 100%;
				font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
			}

			#menu {
			        position: absolute;
			        background: #fff;
			        padding: 10px;
			        font-family: 'Open Sans', sans-serif;
			}
		</style>
		<div id='map'></div>
		<div id='menu'>
		    <input id='basic' type='radio' name='rtoggle' value='basic'>
		    <label for='basic'>basic</label>
		    <input id='streets' type='radio' name='rtoggle' value='streets'>
		    <label for='streets'>streets</label>
		    <input id='bright' type='radio' name='rtoggle' value='bright'>
		    <label for='bright'>bright</label>
		    <input id='light' type='radio' name='rtoggle' value='light'>
		    <label for='light'>light</label>
		    <input id='dark' type='radio' name='rtoggle' value='dark'>
		    <label for='dark'>dark</label>
		    <input id='satellite' type='radio' name='rtoggle' value='satellite' checked='checked'>
		    <label for='satellite'>satellite</label>
		</div>
		<script>
			mapboxgl.accessToken = 'pk.eyJ1IjoiYWRhcmlhbiIsImEiOiJjajJvYWkzbncwMnRtMnJtaXljZjkzZm1tIn0.dadJW7Lq3wuEU6jr8B2Rcg';
			var map = new mapboxgl.Map({
				container: 'map', //container id
				style: 'mapbox://styles/mapbox/satellite-streets-v10',
				center: [ -120.4234415, 37.3660279], //starting position
				zoom: 17 //starting zoom
			});

			var layerList = document.getElementById('menu');
			var inputs = layerList.getElementsByTagName('input');

			function switchLayer(layer) {
			    var layerId = layer.target.id;
			    map.setStyle('mapbox://styles/mapbox/' + layerId + '-v9');
			}

			for (var i = 0; i < inputs.length; i++) {
				if (i == 4) {
					mapboxgl.accessToken = 'pk.eyJ1IjoiYWRhcmlhbiIsImEiOiJjajJvYWkzbncwMnRtMnJtaXljZjkzZm1tIn0.dadJW7Lq3wuEU6jr8B2Rcg';
					inputs[4].onclick = switchLayer;
				} else {
			    		inputs[i].onclick = switchLayer;
				}
			}

			map.on('load', function() {
				//Add a layer showing the places.
				map.addLayer({
					"id": "places",
					"type": "symbol",
					"source": {
						"type": "geojson",
						"data": {
							"type": "FeatureCollection",
							"features": [{
								"type": "Feature",
								"properties": {
									"description": "<strong>Engineering Service Learning (ENGSL)</strong><p><a href=\"https://engineeringservicelearning.ucmerced.edu/\" target=\"_blank\" title=\"Opens in a new window\">Engineering Service Learning</a>: Sustainable-Sites hub for weekly meetings.</p>",
									"icon": "star"
								},
								"geometry": {
									"type": "Point",
									"coordinates": [-120.422485, 37.366126]
								}
							}]
						}
					},
					"layout": {
						"icon-image": "{icon}-15",
						"icon-allow-overlap": true
					}
				});

				//Add a layer showing the points
				map.addLayer({
					"id": "points",
					"type": "symbol",
					"source": {
						"type": "geojson",
						"data": {
							"type": "FeatureCollection",
							"features": [{
								"type": "Feature",
								"geometry": {
									"type": "Point",
									"coordinates": [-120.4291989, 37.3640066]
								},
								"properties": {
									"title": "Bicycle Rack",
									"icon": "star"
								}
							}, {
								"type": "Feature",
								"geometry": {
									"type": "Point",
									"coordinates": [-120.4292576, 37.3641988]
								},
								"properties": {
									"title": "Bicycle Rack",
									"icon": "star"
								}
							}, {
								"type": "Feature",
								"geometry": {
									"type": "Point",
									"coordinates": [-120.4296224, 37.3643237]
								},
								"properties": {
									"title": "Bicycle Rack",
									"icon": "star"
								}
							}, {
								"type": "Feature",
								"geometry": {
									"type": "Point",
									"coordinates": [-120.4303757, 37.3639896]
								},
								"properties": {
									"title": "Bicycle Rack",
									"icon": "star"
								}
							}, {
								"type": "Feature",
								"geometry": {
									"type": "Point",
									"coordinates": [-120.4302195, 37.3639954]
								},
								"properties": {
									"title": "Bicycle Rack",
									"icon": "star"
								}
							}, {
								"type": "Feature",
								"geometry": {
									"type": "Point",
									"coordinates": [-120.4301149, 37.3639821]
								},
								"properties": {
									"title": "Bicycle Rack",
									"icon": "star"
								}
							}, {
								"type": "Feature",
								"geometry": {
									"type": "Point",
									"coordinates": [-120.4299597, 37.3639771]
								},
								"properties": {
									"title": "Bicycle Rack",
									"icon": "star"
								}
							}, {
								"type": "Feature",
								"geometry": {
									"type": "Point",
									"coordinates": [-120.4295453, 37.3638038]
								},
								"properties": {
									"title": "Bicycle Rack",
									"icon": "star"
								}
							}, {
								"type": "Feature",
								"geometry": {
									"type": "Point",
									"coordinates": [-120.4289907, 37.3636093]
								},
								"properties": {
									"title": "Bicycle Rack",
									"icon": "star"
								}
							}, {
								"type": "Feature",
								"geometry": {
									"type": "Point",
									"coordinates": [-120.4290162, 37.3638806]
								},
								"properties": {
									"title": "Bicycle Rack",
									"icon": "star"
								}
							}, {
								"type": "Feature",
								"geometry": {
									"type": "Point",
									"coordinates": [-120.4290199, 37.3641676]
								},
								"properties": {
									"title": "Bicycle Rack",
									"icon": "star"
								}
							}]
						}
					},
					"layout": {
						"icon-image": "{icon}-15",
						"text-field": "{title}",
						"text-font": ["Open Sans Semibold", "Arial Unicode MS Bold"],
						"text-offset": [0, 0.6],
						"text-anchor": "top"
					},
					"paint": {
						"icon-color": "#FFF"
					}
				});

				//When click event occures on a feature in the places layre, open a popup at the location of the feature, with description HTML from its properties.
				map.on('click', 'places', function(e) {
					new mapboxgl.Popup()
						.setLngLat(e.features[0].geometry.coordinates)
						.setHTML(e.features[0].properties.description)
						.addTo(map);
				});

				//Change the cursor to a pointer when the mouse is over the places layer.
				map.on('mouseenter', 'places', function() {
					map.getCanvas().style.cursor = 'pointer';
				});

				//Change it back to a pointer when it leaves.
				map.on('mouseleave', 'places', function() {
					map.getCanvas().style.cursor = '';
				});
			});

			//Add zoom and rotation controls to the map.
			map.addControl(new mapboxgl.NavigationControl());
		</script>
	</body>
</html>
